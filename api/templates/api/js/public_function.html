<script>
    /**
     *  Function will lookup the email and return TRUE or FALSE to the callback.
     */
    function public_is_email_unique(email, callback) {
        var url = "/api/isemailunique/?format=json";
        jQuery.ajax({
            url: url,
            data: JSON.stringify({
                'email': email,
            }),
            dataType: 'text',
            headers: {
                Authorization: 'Token ' + '{{ request.token }}'
            },
            cache: false,
            contentType: 'application/json; charset=utf-8',
            processData: false,
            type: 'POST',
            success: function(data){
                var is_unique = data.indexOf('true') !== -1;
                callback(is_unique);
            },
            error: function(xhr,status,error) {
                console.debug(status + ': ' + error + ' -- ' + xhr.responseText);
                callback(false);
            },
            complete: function(xhr,status) {
                // Do nothing.
            }
        });
    }

    function public_is_organization_schema_name_unique(schema_name, callback) {
        var url = "/api/isorganizationschemanameunique/?format=json";
        jQuery.ajax({
            url: url,
            data: JSON.stringify({
                'name': schema_name,
            }),
            dataType: 'text',
            headers: {
                Authorization: 'Token ' + '{{ request.token }}'
            },
            cache: false,
            contentType: 'application/json; charset=utf-8',
            processData: false,
            type: 'POST',
            success: function(data){
                var is_unique = data.indexOf('true') !== -1;
                callback(is_unique);
            },
            error: function(xhr,status,error) {
                console.debug(status + ': ' + error + ' -- ' + xhr.responseText);
                callback(false);
            },
            complete: function(xhr,status) {
                // Do nothing.
            }
        });
    }
</script>
