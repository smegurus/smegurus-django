{% load i18n %}
<script>
    function ajax_api_login(username, password, success_callback, error_callback) {
        sign_in(
            username,
            password,
            function(json_result) {
                success_callback();
            },
            function(error_json_result) {
                error_callback();
            }
        ); // End Login
    }

    function ajax_login() {
        // Defensive Code: Name handling.
        if( $('#id_email').val() == "" ){
            alert("Missing Email");
            return;
        }
        if ( !is_email_valid( $('#id_email').val() ) ) {
            alert("Email not valid.");
            return;
        }
        if( $('#id_password').val() == "" ){
            alert("Missing Password");
            return;
        }

        ajax_api_login(
            $('#id_email').val(),
            $('#id_password').val(),
            function(login_json_result) {
                console.log(login_json_result); // Debugging purposes only.
                window.location = "{% url 'foundation_auth_user_launchpad' %}";
            },
            function(login_error_json_result) {
                console.log(login_error_json_result);
                alert("Wrong username or password.");
            }
        ); // end Login
    }
</script>
