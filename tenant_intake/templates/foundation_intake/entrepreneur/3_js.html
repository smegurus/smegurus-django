{% load i18n %}
<script>
    function disable_btn() {
        $('#id_continue_btn').prop("disabled", true);
        $('#id_continue_btn').val("{% trans 'Please Wait...' %}");
    }

    function enable_btn() {
        $('#id_continue_btn').prop("disabled", false);
        $('#id_continue_btn').val("{% trans 'Save & Continue' %}");
    }

    function ajax_cancel_and_continue() {
        window.location = "{% url 'foundation_auth_config_entr_step_four' %}";
    }

    function ajax_save_and_continue() {
        disable_btn(); // Disable the button so no multiple presses happen.
        get_tenant_tellusyourneed(
            {{ tellusyourneed.id }},
            function(tellusyourneed) {
                tellusyourneed['needs_financial_management'] = $('#id_needs_financial_management').is(':checked');
                tellusyourneed['needs_sales'] = $('#id_needs_sales').is(':checked');
                tellusyourneed['needs_social_media'] = $('#id_needs_social_media').is(':checked');
                tellusyourneed['needs_other'] = $('#id_needs_other').is(':checked');
                tellusyourneed['other'] = $('#id_other').val();
                console.log(tellusyourneed);
                set_tenant_tellusyourneed(
                    tellusyourneed,
                    function(json_result) {
                        enable_btn();
                        console.log(json_result);
                        window.location = "{% url 'foundation_auth_config_entr_step_four' %}";
                    },
                    function(error_json_result) {
                        enable_btn();
                        console.log(error_json_result);
                        alert(error_json_result);
                    }
                ); // end Set TellUsYourNeed
            },
            function(error_json_result) {
                enable_btn();
                console.log(error_json_result);
                alert(error_json_result);
            }
        ); // end Get TellUsYourNeed
    }

</script>
